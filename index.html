<!DOCTYPE html>
<html>
	<head>
		<title>UF3-NF4-A1</title>

		<style type="text/css">
			p {
				margin: 1%;
			}

			button {
				margin: 1%;
				position: relative;
				transform: translateX(-50%);
				left: 50%;
			}
			.container {
				float: left;
				width: 30%;
				margin: 1%;
				border: solid 2px CornflowerBlue;
			}

			.innerContainer {
				width: 90%;
				margin:5%;
				background-color: aliceblue;
			}
		</style>
	</head>
	<body>
		<div class="container">
			<p>Contingut del fitxer <span style="font-family: Courier;">dades.txt</span></p>
			<div id="divGetText" class="innerContainer">
				&nbsp;
			</div>
			<button id="btnGetText">Obtenir text</button>
		</div>
		<div class="container">
			<p>Llenguatge de programació que ocupa la posició <select id="languages"><option value="1">1</option><option value="2">2</option><option value="3">3</option></select></p>
			<div id="divGetXML" class="innerContainer">
				&nbsp;
			</div>
			<button id="btnGetXML">Obtenir XML</button>
		</div>
		<div class="container">
			<p>Alumne del grup <select id="studentGroup"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option></select> que ocupa la posició <select id="studentPosition"><option value="1">1</option><option value="2">2</option></select></p>
			<div id="divGetJSON" class="innerContainer">
				&nbsp;
			</div>
			<button id="btnGetJSON">Obtenir JSON</button>
		</div>

		<script type="text/javascript">
		function getFile(file, callback) {
			var xhr = new XMLHttpRequest();
			xhr.open('GET', file);
			xhr.onload = function() {
				if (xhr.status === 200) {
					callback(xhr.responseText);
				}
				else {
					alert('error:  ' + xhr.status);
				}
			};
			xhr.send();
		}
		document.querySelector('#btnGetJSON').addEventListener('click', function() {
			getFile('dades.json', function(response) {
				var studentGroup = document.querySelector('#studentGroup').value;
				var studentPosition = document.querySelector('#studentPosition').value;
				var data = JSON.parse(response);
				document.querySelector('#divGetJSON').innerHTML = data['grup'+studentGroup][studentPosition-1] || 'No hi ha alumnes';
			});
		});
		document.querySelector('#btnGetXML').addEventListener('click', function() {
			getFile('dades.xml', function(response) {
				var languages = document.querySelector('#languages').value;
				var parser = new DOMParser();
				var data = parser.parseFromString(response,"text/xml");
				document.querySelector('#divGetXML').innerHTML = data.querySelectorAll('llenguatge')[languages-1].getAttribute('nom');
			});
		});
		document.querySelector('#btnGetText').addEventListener('click', function() {
			getFile('dades.txt', function(response) {
				document.querySelector('#divGetText').innerHTML = response;
			});
		});
		
		
		</script>
	</body>
</html>